# Track activity and bells
set -g monitor-activity on
set -g monitor-bell on

# Visual indicators in status bar (off = rely on window-status styles only, no status-bar messages)
set -g visual-activity off
set -g visual-bell off

# Status bar base style
set -g status-style bg=colour235,fg=colour248

# Current window style
set -g window-status-current-style bg=colour25,fg=white,bold
set -g window-status-current-format ' #I:#W '

# Default window format
set -g window-status-format ' #I:#W#{?window_bell_flag, !,#{?window_activity_flag, *,}} '

# Style for windows needing attention - inverted colors with bg to stand out
set -g window-status-activity-style bg=yellow,fg=black,bold
set -g window-status-bell-style bg=red,fg=white,bold

# Auto-focus left pane (user input) when switching to control window
# The right pane is a read-only dashboard, so focus should always land on the left
set-hook -g after-select-window 'if-shell "[ \"#{window_name}\" = \"control\" ]" "select-pane -t .0"'

# Key binding to jump to next window with activity or bell
# Uses tmux -f filter instead of awk to avoid shell quoting issues
bind-key -n C-g run-shell '\
  target=$(tmux list-windows -f "#{window_bell_flag}" -F "#{window_index}" | head -1); \
  if [ -z "$target" ]; then \
    target=$(tmux list-windows -f "#{window_activity_flag}" -F "#{window_index}" | head -1); \
  fi; \
  [ -n "$target" ] && tmux select-window -t "$target" \
'
